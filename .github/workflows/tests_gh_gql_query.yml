name: Github GraphQL Queries
on:
  workflow_dispatch:
    inputs:
      username:
        type: string
        required: true

jobs:
  echo-result:
    runs-on: ubuntu-latest
    steps:
      - name: Get project data
        env:
          GH_TOKEN: ${{ secrets.GH_TOKEN }}
          PROJECT_NUMBER: 13
        run: |
          gh api graphql -f query='
          query Organization($login: String!, $number: Int!) {
            user(login: $login) {
                projectV2(number: $number) {
                    id,
                    title
                }
            }
          }' -f login=${{ inputs.username }} -F number=$PROJECT_NUMBER > project_data.json
      - name: Upload artifact
        uses: actions/upload-artifact@v4
        with:
          name: project_data
          path: project_data.json
